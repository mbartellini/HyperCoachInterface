'use strict';function _0xed67(){const _0x6cfc91=['13157802lnVccn','insert','../errors/errors','update','Exercise','1669464sZlaTD','mapImageEntity','./ModelMapper','mapImageDto','queryById','18jTSGiH','exports','1353147CNBhwl','2053984LanPgv','queryByAdvancedFilter','3811384DUbKlp','remove','Image\x20id\x20','updateImageDto','User\x20is\x20not\x20the\x20owner\x20of\x20exercise\x20id\x20','create','retrieve','Image','15611nNRzBG','\x20not\x20found','28fOuFQw','Exercise\x20id\x20','userId','deleteById','add','map','content','3155095eeXSuF','retrieveList'];_0xed67=function(){return _0x6cfc91;};return _0xed67();}const _0x532cd3=_0x4a3f;(function(_0x221254,_0x46f549){const _0x162723=_0x4a3f,_0x3ae9f7=_0x221254();while(!![]){try{const _0x3a4ec3=-parseInt(_0x162723(0xfa))/0x1*(-parseInt(_0x162723(0x10f))/0x2)+-parseInt(_0x162723(0x111))/0x3+parseInt(_0x162723(0x112))/0x4+parseInt(_0x162723(0x103))/0x5+-parseInt(_0x162723(0x10a))/0x6*(-parseInt(_0x162723(0xfc))/0x7)+parseInt(_0x162723(0xf2))/0x8+-parseInt(_0x162723(0x105))/0x9;if(_0x3a4ec3===_0x46f549)break;else _0x3ae9f7['push'](_0x3ae9f7['shift']());}catch(_0x53a030){_0x3ae9f7['push'](_0x3ae9f7['shift']());}}}(_0xed67,0xeab6a));function _0x4a3f(_0x816268,_0x45ad77){const _0xed6765=_0xed67();return _0x4a3f=function(_0x4a3f77,_0x3476a3){_0x4a3f77=_0x4a3f77-0xf1;let _0x31ca91=_0xed6765[_0x4a3f77];return _0x31ca91;},_0x4a3f(_0x816268,_0x45ad77);}const {RepositoryName,RepositoryFactory}=require('../repository/RepositoryFactory'),{ModelMapper}=require(_0x532cd3(0x10c)),{NotFoundError,ForbiddenError}=require(_0x532cd3(0x107));async function ensureExercise(_0x34d669,_0x5c47d4,_0x3c1edd=!![]){const _0x431acd=_0x532cd3,_0x49a9c8=RepositoryFactory['create'](RepositoryName[_0x431acd(0x109)]),_0x2efff1=await _0x49a9c8[_0x431acd(0x10e)](_0x5c47d4);if(!_0x2efff1)throw new NotFoundError([_0x431acd(0xfd)+_0x5c47d4+_0x431acd(0xfb)]);if(_0x3c1edd&&_0x2efff1[_0x431acd(0xfe)]!==_0x34d669['id'])throw new ForbiddenError([_0x431acd(0xf6)+_0x5c47d4]);return _0x2efff1;}async function ensureImage(_0x795428){const _0x56b782=_0x532cd3,_0x29c398=RepositoryFactory['create'](RepositoryName['Image']);let _0x4d3abd=await _0x29c398[_0x56b782(0x10e)](_0x795428);if(!_0x4d3abd)throw new NotFoundError([_0x56b782(0xf4)+_0x795428+'\x20not\x20found']);return _0x4d3abd;}module[_0x532cd3(0x110)][_0x532cd3(0x100)]=async(_0x28007b,_0x31599e,_0x5490b2)=>{const _0x191e71=_0x532cd3;await ensureExercise(_0x28007b,_0x31599e);const _0x186552=ModelMapper[_0x191e71(0x10d)](_0x5490b2,_0x31599e),_0x46491a=RepositoryFactory[_0x191e71(0xf7)](RepositoryName[_0x191e71(0xf9)]),_0x28dc99=await _0x46491a[_0x191e71(0x106)](_0x186552);return ModelMapper['mapImageEntity'](_0x28dc99);},module[_0x532cd3(0x110)]['modify']=async(_0x91d895,_0x181440,_0x415fa2,_0x403998)=>{const _0x21c4b6=_0x532cd3;await ensureExercise(_0x91d895,_0x181440);const _0x10c432=RepositoryFactory[_0x21c4b6(0xf7)](RepositoryName[_0x21c4b6(0xf9)]);let _0x3db753=await ensureImage(_0x415fa2);return ModelMapper[_0x21c4b6(0xf5)](_0x3db753,_0x403998),_0x3db753=await _0x10c432[_0x21c4b6(0x108)](_0x3db753),ModelMapper[_0x21c4b6(0x10b)](_0x3db753);},module[_0x532cd3(0x110)][_0x532cd3(0xf3)]=async(_0x139d44,_0x3e647e,_0x39640f)=>{const _0x2233dd=_0x532cd3;await ensureExercise(_0x139d44,_0x3e647e);const _0x32c485=RepositoryFactory[_0x2233dd(0xf7)](RepositoryName[_0x2233dd(0xf9)]),_0x133ad2=await _0x32c485[_0x2233dd(0xff)](_0x39640f);if(_0x133ad2===0x0)throw new NotFoundError([_0x2233dd(0xf4)+_0x39640f+_0x2233dd(0xfb)]);},module['exports'][_0x532cd3(0xf8)]=async(_0x4d415e,_0x4dac7a,_0x545070)=>{const _0x21c49d=_0x532cd3;await ensureExercise(_0x4d415e,_0x4dac7a,![]);const _0x1df202=await ensureImage(_0x545070);return ModelMapper[_0x21c49d(0x10b)](_0x1df202);},module[_0x532cd3(0x110)][_0x532cd3(0x104)]=async(_0x5280c0,_0xd808e,_0x392a06,_0x4cb7aa,_0x4f1d98,_0x1414ef)=>{const _0x1f253a=_0x532cd3;await ensureExercise(_0x5280c0,_0xd808e,![]);const _0x7418fa={'exerciseId':_0xd808e},_0x1f1583=RepositoryFactory[_0x1f253a(0xf7)](RepositoryName[_0x1f253a(0xf9)]);let _0x52151e=await _0x1f1583[_0x1f253a(0xf1)](_0x7418fa,null,_0x392a06,_0x4cb7aa,_0x4f1d98,_0x1414ef);return _0x52151e[_0x1f253a(0x102)]=_0x52151e[_0x1f253a(0x102)][_0x1f253a(0x101)](_0x2a86c1=>ModelMapper['mapImageEntity'](_0x2a86c1)),_0x52151e;};